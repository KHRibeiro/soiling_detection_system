<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Artigos sobre Soiling em PV</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f7f9fc;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #1a4c7c;
    }
    
h3 {
  font-family: Arial, sans-serif;
  color: #1a4c7c;
  font-size: 12px;
  text-align: right;       /* Alinha o texto à direita dentro do elemento */
  position: absolute;      /* Permite posicionamento exato */
  top: 20px;               /* Distância do topo */
}

    .controls {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
    }
    input, select {
      padding: 8px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      background: white;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    th, td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: left;
    }
    th {
      background: #1a4c7c;
      color: white;
    }
    tr:nth-child(even) {
      background: #f2f6fb;
    }
    a {
      color: #1a4c7c;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <h1>Artigos - Sujidade em painéis fotovoltaicos</h1>
  <h3>Kássio Henrique Ribeiro</h3>
  <div class="controls">
    <input type="text" id="searchInput" placeholder="Buscar por título, autor ou descrição...">
    <select id="yearFilter">
      <option value="">Todos os anos</option>
      <option value="2025">2025</option>
      <option value="2024">2024</option>
      <option value="2023">2023</option>
      <option value="2022">2022</option>
      <option value="2020">2020</option>
      <option value="2019">2019</option>
      <option value="2017">2017</option>
    </select>
  </div>

  <table id="articlesTable">
    <thead>
      <tr>
        <th>Título</th>
        <th>Autores</th>
        <th>Ano</th>
        <th>Descrição</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>


<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

  const SUPABASE_URL = 'https://sxbiecndrwrdtnkhfilt.supabase.co';
  const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN4YmllY25kcndyZHRua2hmaWx0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0MzE0NzEsImV4cCI6MjA3MzAwNzQ3MX0.AupqMUMM0hznc_yTf0icI78r0LVf6hbDeaC6s5i13KI';

  const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);



async function fetchData() {
  const { data, error } = await supabase.from('artigos_soiling').select('*');
  if (error) {
    console.error('Erro ao buscar dados:', error.message);
    return;
  }

  const tbody = document.querySelector('#articlesTable tbody');
  tbody.innerHTML = '';


  data.forEach(item => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${item.titulo? `<a href="${item.link}" target="_blank">${item.titulo}</a>` : 'vazio'}</td>
      <td>${item.autores}</td>
      <td>${item.ano}</td>
      <td>${item.descricao}</td>
    `;
    tbody.appendChild(row);
  });

}

document.addEventListener('DOMContentLoaded', () => {
    fetchData();
  });
  
</script>
  
  <script>
    const searchInput = document.getElementById('searchInput');
    const yearFilter = document.getElementById('yearFilter');
    const table = document.getElementById('articlesTable');
    const rows = table.getElementsByTagName('tr');

    function filterTable() {
      const searchValue = searchInput.value.toLowerCase();
      const yearValue = yearFilter.value;

      for (let i = 1; i < rows.length; i++) {
        const cells = rows[i].getElementsByTagName('td');
        const title = cells[0].textContent.toLowerCase();
        const authors = cells[1].textContent.toLowerCase();
        const year = cells[2].textContent;
        const description = cells[3].textContent.toLowerCase();

        const matchesSearch = title.includes(searchValue) || authors.includes(searchValue) || description.includes(searchValue);
        const matchesYear = !yearValue || year === yearValue;

        if (matchesSearch && matchesYear) {
          rows[i].style.display = '';
        } else {
          rows[i].style.display = 'none';
        }
      }
    }

    searchInput.addEventListener('keyup', filterTable);
    yearFilter.addEventListener('change', filterTable);
  </script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const getCellValue = (tr, idx) => tr.children[idx].innerText || tr.children[idx].textContent;

  const comparer = (idx, asc) => (a, b) => 
    getCellValue(asc ? a : b, idx).localeCompare(getCellValue(asc ? b : a, idx));

  document.querySelectorAll('#articlesTable th').forEach(th => {
    th.addEventListener('click', () => {
      const table = th.closest('table');
      const tbody = table.querySelector('tbody');
      const rows = Array.from(tbody.querySelectorAll('tr'));
      const index = Array.from(th.parentNode.children).indexOf(th);
      const asc = !th.classList.contains('asc');
      rows.sort(comparer(index, asc));
      rows.forEach(row => tbody.appendChild(row));
      th.classList.toggle('asc', asc);
      th.classList.toggle('desc', !asc);
    });
  });
});
</script>

  
</body>
</html>













