<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <link rel="icon" href="sun.ico" type="image/x-icon">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <meta charset="UTF-8">
  <title>Artigos sobre Soiling em PV</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f7f9fc;
      color: #333;
    }


        .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .header h1 {
      margin: 0;
      color: #1a4c7c;
      margin-bottom: 30px; /* espaço até o nome */
    }
    
    .header h3 {
      margin: 0;
      font-size: 14px;
      color: #1a4c7c;
      margin-bottom: 30px; /* espaço até o nome */
    }
    
    .controls {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
    }
    input, select {
      padding: 8px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      background: white;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    th, td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: left;
    }
    th {
      background: #1a4c7c;
      color: white;
    }
    tr:nth-child(even) {
      background: #f2f6fb;
    }
    a {
      color: #1a4c7c;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  
<div class="header">
  <h1>Artigos - Sujidade em painéis fotovoltaicos (Soiling)</h1>
  <h3>Kássio Henrique Ribeiro</h3>
  
</div>

<div>
  <a href="https://supabase.com/dashboard/project/sxbiecndrwrdtnkhfilt/editor/17294" class="btn btn-primary btn-sm mt-2">Database</a>
  <a href="https://github.com/KHRibeiro/soiling_detection_system.git" class="btn btn-primary btn-sm mt-2">Github</a>
  <a href="https://www.overleaf.com/project" class="btn btn-success btn-sm mt-2">Overleaf</a>
</div>

<p id="contador-artigos">Quantidade de artigos: 0</p>
  
  <div class="controls">
    <input type="text" id="searchInput" placeholder="Buscar por título, autor ou descrição...">
    <select id="yearFilter">
      <option value="">Todos os anos</option>
      <option value="2025">2025</option>
      <option value="2024">2024</option>
      <option value="2023">2023</option>
      <option value="2022">2022</option>
      <option value="2020">2020</option>
      <option value="2019">2019</option>
      <option value="2017">2017</option>
    </select>
  </div>

  <table id="articlesTable" class="table table-striped-columns">
    <thead>
      <tr>
        <th>Ordem</th>
        <th>Título</th>
        <th>Autores</th>
        <th>Ano</th>
        <th>Descrição</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>


<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

  const SUPABASE_URL = 'https://sxbiecndrwrdtnkhfilt.supabase.co';
  const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN4YmllY25kcndyZHRua2hmaWx0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0MzE0NzEsImV4cCI6MjA3MzAwNzQ3MX0.AupqMUMM0hznc_yTf0icI78r0LVf6hbDeaC6s5i13KI';

  const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);



async function fetchData() {
  const { data, error } = await supabase.from('artigos_soiling').select('*');
  if (error) {
    console.error('Erro ao buscar dados:', error.message);
    return;
  }

  const tbody = document.querySelector('#articlesTable tbody');
  tbody.innerHTML = '';


  data.forEach(item => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${item.priorizacao}</td>
      <td>${item.titulo? `<a href="${item.link}" target="_blank">${item.titulo}</a>` : 'vazio'}</td>
      <td>${item.autores}</td>
      <td>${item.ano}</td>
      <td>${item.descricao}</td>
    `;
    tbody.appendChild(row);
  });

}

document.addEventListener('DOMContentLoaded', () => {
    fetchData();
  });
  
</script>
  
  <script>
    const searchInput = document.getElementById('searchInput');
    const yearFilter = document.getElementById('yearFilter');
    const table = document.getElementById('articlesTable');
    const rows = table.getElementsByTagName('tr');

    function filterTable() {
      const searchValue = searchInput.value.toLowerCase();
      const yearValue = yearFilter.value;

      for (let i = 1; i < rows.length; i++) {
        const cells = rows[i].getElementsByTagName('td');
        const prio = cells[0].textContent.toLowerCase();
        const title = cells[1].textContent.toLowerCase();
        const authors = cells[2].textContent.toLowerCase();
        const year = cells[3].textContent;
        const description = cells[4].textContent.toLowerCase();

        const matchesSearch = title.includes(searchValue) || authors.includes(searchValue) || description.includes(searchValue);
        const matchesYear = !yearValue || year === yearValue;

        if (matchesSearch && matchesYear) {
          rows[i].style.display = '';
        } else {
          rows[i].style.display = 'none';
        }
      }
    }

    searchInput.addEventListener('keyup', filterTable);
    yearFilter.addEventListener('change', filterTable);
  </script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const getCellValue = (tr, idx) => tr.children[idx].innerText || tr.children[idx].textContent;

  const comparer = (idx, asc) => (a, b) => 
    getCellValue(asc ? a : b, idx).localeCompare(getCellValue(asc ? b : a, idx));

  document.querySelectorAll('#articlesTable th').forEach(th => {
    th.addEventListener('click', () => {
      const table = th.closest('table');
      const tbody = table.querySelector('tbody');
      const rows = Array.from(tbody.querySelectorAll('tr'));
      const index = Array.from(th.parentNode.children).indexOf(th);
      const asc = !th.classList.contains('asc');
      rows.sort(comparer(index, asc));
      rows.forEach(row => tbody.appendChild(row));
      th.classList.toggle('asc', asc);
      th.classList.toggle('desc', !asc);
    });
  });
});
</script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
  const contador = document.getElementById('contador-artigos');
  const tbody = document.querySelector('#articlesTable tbody');

  const observer = new MutationObserver(() => {
  const linhas = tbody.querySelectorAll('tr').length;
  contador.textContent = `Quantidade de artigos: ${linhas}`;
  });

  observer.observe(tbody, { childList: true });
});
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.min.js" integrity="sha384-7qAoOXltbVP82dhxHAUje59V5r2YsVfBafyUDxEdApLPmcdhBPg1DKg1ERo0BZlK" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>  
</body>
</html>


































